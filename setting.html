<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - DebugMyDay</title>

  <link rel="stylesheet" href="setting.css">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <div class="sidebar" id="appNav">
    <div class="nav-header">
        <button id="menu-toggle" class="btn text-white p-0" style="display:none; font-size: 24px;">
            <i class="bi bi-list"></i>
        </button>
        <h5 class="fw-bold app-title">DebugMyDay</h5>
    </div>


    <a class="menu-item" href="../Dashboard/dashboard.php">
        <i class="bi bi-speedometer2"></i> <span class="menu-text">Dashboard</span>
    </a>

    <a class="menu-item" href="tasks.html">
        <i class="bi bi-list-check"></i> <span class="menu-text">Tasks</span>
    </a>

    <a class="menu-item" href="../profile.php"><i class="bi bi-person-circle"></i> <span class="menu-text">Profile</span></a>
    <a class="menu-item" href="pomodoro.html"><i class="bi bi-stopwatch"></i> <span class="menu-text">Pomodoro Timer</span></a>
    <a class="menu-item active" href="setting.php"><i class="bi bi-gear-fill"></i> <span class="menu-text">Settings</span></a>
    <a class="menu-item" href="aboutus.html"><i class="bi bi-info-circle"></i> <span class="menu-text">About Us</span></a>

    <a class="menu-item" href="../logout.php"><i class="bi bi-box-arrow-right"></i> <span class="menu-text">Logout</span></a>
</div>

    <div class="content app-content" id="appContent">
    
    <button id="external-menu-toggle" class="btn p-0" style="display:none;">
        <i class="bi bi-list"></i>
    </button>
    
    <h1 class="page-title">Settings</h1>
    <p class="subtitle">Customize your experience</p>

 <div class="settings-card">
    <h2><i class="bi bi-palette-fill"></i> Appearance</h2>
    
    <div class="setting-item">
        <label for="darkModeToggle">Dark Mode</label>
        <small class="form-text text-muted">
            Switch to dark mode for a better night-time experience
        </small>
        <div class="form-check form-switch mt-2">
            <input class="form-check-input" type="checkbox" id="darkModeToggle">
            <label class="form-check-label" for="darkModeToggle">
                Enable Dark Mode
            </label>
        </div>
    </div>
</div>
    <div class="settings-card">
        <label><i class="bi bi-bell-fill"></i> We can give you more but not now, stay tuned!</label>
    </div>
</div>

<footer class="footer" id="appFooter">
    </footer>


<script>
document.addEventListener("DOMContentLoaded", function () {

    const darkToggle = document.getElementById("darkModeToggle");
    const darkText = document.querySelector(".form-text");

    // Load saved theme from localStorage
    const savedTheme = localStorage.getItem("theme") || "light";
    if(savedTheme === "dark") {
        document.body.classList.add("dark");
        darkToggle.checked = true;
        darkText.textContent = "Dark mode is enabled. Enjoy the night!";
    }

    // Toggle dark mode
    darkToggle.addEventListener("change", function () {
        const isDark = darkToggle.checked;
        document.body.classList.toggle("dark", isDark);
        localStorage.setItem("theme", isDark ? "dark" : "light");

        darkText.textContent = isDark
            ? "Dark mode is enabled. Enjoy the night!"
            : "Switch to dark mode for a better night-time experience";
    });

    // === RESPONSIVE TOGGLE LOGIC (Fixed for Tiny Screen) ===
    const appNav = document.getElementById('appNav');
    const internalMenuToggle = document.getElementById('menu-toggle'); // Used for 768px mode
    const externalMenuToggle = document.getElementById('external-menu-toggle'); // NEW: Used for 576px mode
    const appContent = document.getElementById('appContent');
    const appFooter = document.getElementById('appFooter');

    const isSmallScreen = () => window.innerWidth <= 768;

    const toggleMenu = () => {
        appNav.classList.toggle('nav-open');
        
        if (isSmallScreen()) { 
            appContent.classList.toggle('blur-content');
            if (appFooter) {
                appFooter.classList.toggle('blur-content');
            }
        }
    };


    if (internalMenuToggle) {
        internalMenuToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            toggleMenu();
        });
    }
    
    if (externalMenuToggle) { 
        externalMenuToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            toggleMenu();
        });
    }
    
    const closeMenuOnBlur = (event) => {
        if (isSmallScreen() && appNav.classList.contains('nav-open') && event.currentTarget.classList.contains('blur-content')) {
            toggleMenu();
        }
    };

    if (appContent) {
        appContent.addEventListener('click', closeMenuOnBlur);
    }

    if (appFooter) {
        appFooter.addEventListener('click', closeMenuOnBlur);
    }

    window.addEventListener('resize', () => {
        if (!isSmallScreen() && appNav.classList.contains('nav-open')) {
            appNav.classList.remove('nav-open');
            appContent.classList.remove('blur-content');
            if (appFooter) {
                 appFooter.classList.remove('blur-content');
            }
        }
    });

});
</script>
</body>
</html>